# Purpose

The merlin-sb-starter project is a template for developing Spring Boot microservices. It implements a RESTful GET 
endpoint that returns a greeting to the caller.

## Project Structure
The top-level source code package is `net.merlin.sbstarter`.  It contains the main application class 
`MerlinSbStarterApplication` and the following subpackages:

* **config** - contains Spring configuration classes
* **controllers** - contains RestController classes that expose REST endpoints
* **models** - contains domain model classes used in the backend
* **dtos** - contains data transfer objects used to shuttle data between UI and backend
* **entities** - contains JPA entity classes
* **repositories** - contains Spring Data JPA repository classes
* **services** - contains Spring Boot service classes that constitute the backend

Not all of these packages contain code for this example project, but they provide a common structure that we can all
work with in future development.

## Configuration

Application configuration data is stored in a file called `application.yaml` located in the `src/main/resources` directory.
It contains multiple profile sections that correspond to the `spring.active.profiles` value, if present in the environment.

## Dependencies

Spring Boot required core dependencies:

* `spring-boot-starter-web` - core functionality required by all Spring Boot microservices
* `spring-boot-starter-test` - core JUnit5 test framework

Additional optional dependencies:

* `spring-boot-devtools` - additional tools to make development easier
* `spring-boot-starter-actuator` - module that provides monitoring of service health and metrics through `HTTP`
* `lombok` - automatic code-generation tool that removes the need for much Java boilerplate code
* `springdoc-openapi-ui` - Java library that automatically generates API documentation from a Spring Boot project
* `jacoco-maven-plugin` - Maven plugin that computes code coverage metrics for SonarQube analysis

## Build the application

To build the project, run this command in the top-level directory of the project:
```shell
mvn clean install
```
This will create an executable JAR file in the `target` directory.

## Run the application

To launch the application, run this command in the top-level directory of the project:
```shell 
mvn spring-boot:run
```

To run under a particular Spring active profile, add a property to the command line:
```shell
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

## Build a Docker image

To create a Docker image of the application, run this command in the top-level directory of the project:
```shell
mvn spring-boot:build-image
````
This will create a `Docker` container image and upload it to the local `Docker` repository.

## Testing

To test the endpoint implementation, visit these URLs in your browser
```shell
http://localhost:8080/api/hello
http://localhost:8080/api/hello?name=Droopy
```

To test the health endpoint generated by Spring Actuator, point your web browser here:
```shell
http://localhost:8080/actuator/health
```

To see the auto-generated API documentation, try this one:
```shell
http://localhost:8080/swagger-ui.html
```

Finally, to see the auto-generated OpenAPI definition of the service in JSON, go here:
```shell
http://localhost:8080/v3/api-docs
```

### Reference Documentation
For further reference, please consider the following sections:

* [Official Apache Maven documentation](https://maven.apache.org/guides/index.html)
* [Spring Boot Maven Plugin Reference Guide](https://docs.spring.io/spring-boot/docs/2.7.3/maven-plugin/reference/html/)
* [Create an OCI image](https://docs.spring.io/spring-boot/docs/2.7.3/maven-plugin/reference/html/#build-image)
* [Spring Boot DevTools](https://docs.spring.io/spring-boot/docs/2.7.3/reference/htmlsingle/#using.devtools)
* [Spring Boot Actuator](https://docs.spring.io/spring-boot/docs/2.7.3/reference/htmlsingle/#actuator)
* [Spring Web](https://docs.spring.io/spring-boot/docs/2.7.3/reference/htmlsingle/#web)
* [Project Lombok](https://projectlombok.org/)

### Guides
The following guides illustrate how to use some features concretely:

* [Building a RESTful Web Service with Spring Boot Actuator](https://spring.io/guides/gs/actuator-service/)
* [Building a RESTful Web Service](https://spring.io/guides/gs/rest-service/)
* [Serving Web Content with Spring MVC](https://spring.io/guides/gs/serving-web-content/)
* [Building REST services with Spring](https://spring.io/guides/tutorials/rest/)
